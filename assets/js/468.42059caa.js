(window.webpackJsonp=window.webpackJsonp||[]).push([[468],{748:function(e,t,a){"use strict";a.r(t);var r=a(14),s=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"ooo-consumerbase-smart-contract"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ooo-consumerbase-smart-contract"}},[e._v("#")]),e._v(" OoO ConsumerBase smart contract")]),e._v(" "),t("p",[e._v("This contract can be imported by any smart contract wishing to include\noff-chain data or data from a different network within it.")]),e._v(" "),t("p",[e._v("The consumer initiates a data request by forwarding the request to the Router\nsmart contract, from where the data provider(s) pick up and process the\ndata request, and forward it back to the specified callback function.")]),e._v(" "),t("h2",{attrs:{id:"functions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#functions"}},[e._v("#")]),e._v(" Functions:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#ConsumerBase-constructor-address-address-"}},[t("code",[e._v("constructor(address _router, address _xfund) internal")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#ConsumerBase-_setRouter-address-"}},[t("code",[e._v("_setRouter(address _router) internal")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#ConsumerBase-_increaseRouterAllowance-uint256-"}},[t("code",[e._v("_increaseRouterAllowance(uint256 _amount) internal")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#ConsumerBase-_requestData-address-uint256-bytes32-"}},[t("code",[e._v("_requestData(address _dataProvider, uint256 _fee, bytes32 _data) internal")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#ConsumerBase-rawReceiveData-uint256-bytes32-"}},[t("code",[e._v("rawReceiveData(uint256 _price, bytes32 _requestId) external")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#ConsumerBase-receiveData-uint256-bytes32-"}},[t("code",[e._v("receiveData(uint256 _price, bytes32 _requestId) internal")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#ConsumerBase-getRouterAddress--"}},[t("code",[e._v("getRouterAddress() external")])])])]),e._v(" "),t("p",[t("a",{attrs:{name:"ConsumerBase-constructor-address-address-"}})]),e._v(" "),t("h3",{attrs:{id:"function-constructor-address-router-address-xfund-internal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-constructor-address-router-address-xfund-internal"}},[e._v("#")]),e._v(" Function "),t("code",[e._v("constructor(address _router, address _xfund) internal")])]),e._v(" "),t("p",[e._v("Contract constructor. Accepts the address for the router smart contract,\nand a token allowance for the Router to spend on the consumer's behalf (to pay fees).")]),e._v(" "),t("p",[e._v("The Consumer contract should have enough tokens allocated to it to pay fees\nand the Router should be able to use the Tokens to forward fees.")]),e._v(" "),t("h4",{attrs:{id:"parameters"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#parameters"}},[e._v("#")]),e._v(" Parameters:")]),e._v(" "),t("ul",[t("li",[t("p",[t("code",[e._v("_router")]),e._v(": address of the deployed Router smart contract")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("_xfund")]),e._v(": address of the deployed xFUND smart contract\n"),t("a",{attrs:{name:"ConsumerBase-_setRouter-address-"}})])])]),e._v(" "),t("h3",{attrs:{id:"function-setrouter-address-router-internal-bool"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-setrouter-address-router-internal-bool"}},[e._v("#")]),e._v(" Function "),t("code",[e._v("_setRouter(address _router) internal -> bool")])]),e._v(" "),t("p",[e._v("No description")]),e._v(" "),t("h4",{attrs:{id:"parameters-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#parameters-2"}},[e._v("#")]),e._v(" Parameters:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("_router")]),e._v(": address of the deployed Router smart contract\n"),t("a",{attrs:{name:"ConsumerBase-_increaseRouterAllowance-uint256-"}})])]),e._v(" "),t("h3",{attrs:{id:"function-increaserouterallowance-uint256-amount-internal-bool"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-increaserouterallowance-uint256-amount-internal-bool"}},[e._v("#")]),e._v(" Function "),t("code",[e._v("_increaseRouterAllowance(uint256 _amount) internal -> bool")])]),e._v(" "),t("p",[e._v("No description")]),e._v(" "),t("h4",{attrs:{id:"parameters-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#parameters-3"}},[e._v("#")]),e._v(" Parameters:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("_amount")]),e._v(": uint256 amount to increase allowance by\n"),t("a",{attrs:{name:"ConsumerBase-_requestData-address-uint256-bytes32-"}})])]),e._v(" "),t("h3",{attrs:{id:"function-requestdata-address-dataprovider-uint256-fee-bytes32-data-internal-bytes32"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-requestdata-address-dataprovider-uint256-fee-bytes32-data-internal-bytes32"}},[e._v("#")]),e._v(" Function "),t("code",[e._v("_requestData(address _dataProvider, uint256 _fee, bytes32 _data) internal -> bytes32")])]),e._v(" "),t("p",[e._v("_requestData - initialises a data request. forwards the request to the deployed\nRouter smart contract.")]),e._v(" "),t("h4",{attrs:{id:"parameters-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#parameters-4"}},[e._v("#")]),e._v(" Parameters:")]),e._v(" "),t("ul",[t("li",[t("p",[t("code",[e._v("_dataProvider")]),e._v(": payable address of the data provider")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("_fee")]),e._v(": uint256 fee to be paid")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("_data")]),e._v(": bytes32 value of data being requested, e.g. PRICE.BTC.USD.AVG requests\naverage price for BTC/USD pair")])])]),e._v(" "),t("h4",{attrs:{id:"return-values"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#return-values"}},[e._v("#")]),e._v(" Return Values:")]),e._v(" "),t("ul",[t("li",[e._v("requestId bytes32 request ID which can be used to track or cancel the request\n"),t("a",{attrs:{name:"ConsumerBase-rawReceiveData-uint256-bytes32-"}})])]),e._v(" "),t("h3",{attrs:{id:"function-rawreceivedata-uint256-price-bytes32-requestid-external"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-rawreceivedata-uint256-price-bytes32-requestid-external"}},[e._v("#")]),e._v(" Function "),t("code",[e._v("rawReceiveData(uint256 _price, bytes32 _requestId) external")])]),e._v(" "),t("p",[e._v("rawReceiveData - Called by the Router's fulfillRequest function\nin order to fulfil a data request. Data providers call the Router's fulfillRequest function\nThe request is validated to ensure it has indeed been sent via the Router.")]),e._v(" "),t("p",[e._v("The Router will only call rawReceiveData once it has validated the origin of the data fulfillment.\nrawReceiveData then calls the user defined receiveData function to finalise the fulfilment.\nContract developers will need to override the abstract receiveData function defined below.")]),e._v(" "),t("h4",{attrs:{id:"parameters-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#parameters-5"}},[e._v("#")]),e._v(" Parameters:")]),e._v(" "),t("ul",[t("li",[t("p",[t("code",[e._v("_price")]),e._v(": uint256 result being sent")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("_requestId")]),e._v(": bytes32 request ID of the request being fulfilled\nhas sent the data\n"),t("a",{attrs:{name:"ConsumerBase-receiveData-uint256-bytes32-"}})])])]),e._v(" "),t("h3",{attrs:{id:"function-receivedata-uint256-price-bytes32-requestid-internal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-receivedata-uint256-price-bytes32-requestid-internal"}},[e._v("#")]),e._v(" Function "),t("code",[e._v("receiveData(uint256 _price, bytes32 _requestId) internal")])]),e._v(" "),t("p",[e._v("receiveData - should be overridden by contract developers to process the\ndata fulfilment in their own contract.")]),e._v(" "),t("h4",{attrs:{id:"parameters-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#parameters-6"}},[e._v("#")]),e._v(" Parameters:")]),e._v(" "),t("ul",[t("li",[t("p",[t("code",[e._v("_price")]),e._v(": uint256 result being sent")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("_requestId")]),e._v(": bytes32 request ID of the request being fulfilled\n"),t("a",{attrs:{name:"ConsumerBase-getRouterAddress--"}})])])]),e._v(" "),t("h3",{attrs:{id:"function-getrouteraddress-external-address"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#function-getrouteraddress-external-address"}},[e._v("#")]),e._v(" Function "),t("code",[e._v("getRouterAddress() external -> address")])]),e._v(" "),t("p",[e._v("getRouterAddress returns the address of the Router smart contract being used")])])}),[],!1,null,null,null);t.default=s.exports}}]);