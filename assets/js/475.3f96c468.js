(window.webpackJsonp=window.webpackJsonp||[]).push([[475],{754:function(t,s,a){"use strict";a.r(s);var e=a(14),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ooo-quickstart"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ooo-quickstart"}},[t._v("#")]),t._v(" OoO Quickstart")]),t._v(" "),s("h2",{attrs:{id:"integration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#integration"}},[t._v("#")]),t._v(" Integration")]),t._v(" "),s("p",[t._v("In order to request data, and enable data provision in your smart contract, you will need to\nimport the "),s("code",[t._v("ConsumerBase.sol")]),t._v(" smart contract and set up two simple functions within your smart contract.")]),t._v(" "),s("ol",[s("li",[t._v("Add the package to your project:")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("yarn add @unification-com/xfund-router\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("In your smart contract, import "),s("code",[t._v("ConsumerBase.sol")]),t._v(":")])]),t._v(" "),s("div",{staticClass:"language-solidity extra-class"},[s("pre",{pre:!0,attrs:{class:"language-solidity"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@unification-com/xfund-router/contracts/lib/ConsumerBase.sol"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Extend your contract, adding "),s("code",[t._v("is ConsumerBase")]),t._v(":")])]),t._v(" "),s("div",{staticClass:"language-solidity extra-class"},[s("pre",{pre:!0,attrs:{class:"language-solidity"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyConsumer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("is")]),t._v(" ConsumerBase "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("Ensure your "),s("code",[t._v("constructor")]),t._v(" function has a parameter to accept the "),s("code",[t._v("Router")]),t._v("  and "),s("code",[t._v("xFUND")]),t._v("\nsmart contract addresses, and pass it to the "),s("code",[t._v("ConsumerBase")]),t._v(":")])]),t._v(" "),s("div",{staticClass:"language-solidity extra-class"},[s("pre",{pre:!0,attrs:{class:"language-solidity"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _xfund"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ConsumerBase")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _xfund"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// other stuff...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("See "),s("RouterLink",{attrs:{to:"/ooo/contracts.html"}},[t._v("Contract Addresses")]),t._v(" for the latest contract addresses")],1)]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("Implement the "),s("code",[t._v("receiveData")]),t._v(" function for data Providers to send data, e.g.")])]),t._v(" "),s("div",{staticClass:"language-solidity extra-class"},[s("pre",{pre:!0,attrs:{class:"language-solidity"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("receiveData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _price"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" _requestId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("internal")]),t._v(" override "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    price "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _price"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),s("p",[t._v("Thus must be "),s("code",[t._v("internal")]),t._v(" and override the "),s("code",[t._v("ConsumerBase")]),t._v("'s "),s("code",[t._v("receiveData")]),t._v(".")])]),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[t._v("Implement a function to request data, for example:")])]),t._v(" "),s("div",{staticClass:"language-solidity extra-class"},[s("pre",{pre:!0,attrs:{class:"language-solidity"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" _provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" _fee"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),t._v(" _data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("external")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_requestData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _fee"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"7"}},[s("li",[t._v("Deploy. For example, using "),s("code",[t._v("truffle")]),t._v(", a very simple migration script for "),s("code",[t._v("Rinkeby")]),t._v(" testnet\nmay look like:")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Load my contract which implements ConsumerLib")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MyConsumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" artifacts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyConsumer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("deployer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// deploy, passing the Router and xFUND smart contract addresses")]),t._v("\n  deployer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyConsumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x...ROUTER_ADDRES"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x...XFUND_ADDRESS"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"initialisation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#initialisation"}},[t._v("#")]),t._v(" Initialisation")]),t._v(" "),s("p",[t._v("Once integrated, compiled and deployed, you will need to send some transactions to the\nEthereum blockchain in order to initialise the fee payment, and data acquisition environment.\nThis involves:")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Increasing the "),s("code",[t._v("xFUND")]),t._v(" token allowance on the "),s("code",[t._v("Router")]),t._v(" smart contract, in order for the "),s("code",[t._v("Router")]),t._v("\nto accept and pay xFUND fees to data providers. This need only be run once, if the initial\nallowance is set high enough. A function is available in the ConsumerBase contract to facilitate\nthis, which can be wrapped around a function in your contract.")])]),t._v(" "),s("li",[s("p",[t._v("Transfer some "),s("code",[t._v("xFUND")]),t._v(" tokens to your smart contract, that is integrating "),s("code",[t._v("ConsumerBase")]),t._v(".\nThis allows you to submit data requests, and your contract to pay fees. The required amount\nof "),s("code",[t._v("xFUND")]),t._v(" to pay for a request fee is sent to the "),s("code",[t._v("Router")]),t._v(" with each request.\nYour contract may need periodically topping up with "),s("code",[t._v("xFUND")]),t._v(", depending on how you implement\nfee payment.")]),t._v(" "),s("p",[s("strong",[t._v("Note")]),t._v(": The "),s("code",[t._v("xFUNDMOCK")]),t._v(" Token on Rinkeby testnet has a faucet function, "),s("code",[t._v("gimme()")]),t._v(" which can be used\nto grab some test tokens.")])])]),t._v(" "),s("p",[t._v("Once these steps have been run through, you will be able to initialise data requests via your\nsmart contract.")])])}),[],!1,null,null,null);s.default=n.exports}}]);