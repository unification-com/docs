(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{328:function(e,a,t){"use strict";t.r(a);var o=t(14),s=Object(o.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"network-upgrade-4-percival"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#network-upgrade-4-percival"}},[e._v("#")]),e._v(" Network Upgrade: 4-percival")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("IMPORTANT")]),e._v(" "),a("p",[a("strong",[e._v("TestNet")]),e._v(" was successfully upgraded to "),a("code",[e._v("4-percival")]),e._v(" in block "),a("strong",[e._v("11,657,000")])]),e._v(" "),a("p",[a("strong",[e._v("MainNet")]),e._v(" was successfully upgraded to "),a("code",[e._v("4-percival")]),e._v(" in block "),a("strong",[e._v("9,577,300")])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),a("p",[e._v("This guide is for operators already running a node. For new nodes, please see the\n"),a("RouterLink",{attrs:{to:"/mainchain/software/cosmovisor/install_und_with_cosmovisor.html"}},[e._v("Install und with Cosmovisor")]),e._v("\ndocumentation.")],1)]),e._v(" "),a("p",[e._v("There are two possible methods for upgrading:")]),e._v(" "),a("ol",[a("li",[e._v("Automatically, using Cosmovisor (recommended)")]),e._v(" "),a("li",[e._v("Manually")])]),e._v(" "),a("h2",{attrs:{id:"automatically-upgrade-from-und-v1-8-x-to-v1-9-x-using-cosmovisor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#automatically-upgrade-from-und-v1-8-x-to-v1-9-x-using-cosmovisor"}},[e._v("#")]),e._v(" Automatically upgrade from und v1.8.x to v1.9.x using Cosmovisor")]),e._v(" "),a("p",[a("strong",[e._v("IMPORTANT:")]),e._v(" This guide assumes the reader has implemented the required changes outlined in\n"),a("RouterLink",{attrs:{to:"/mainchain/migrations/cosmovisor.html"}},[e._v("Using Cosmovisor with und: Quick Start")]),e._v(" and migrated their services before using this guide.")],1),e._v(" "),a("h3",{attrs:{id:"configuring-cosmovisor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuring-cosmovisor"}},[e._v("#")]),e._v(" Configuring Cosmovisor")]),e._v(" "),a("p",[e._v("The following can be implemented well in advance of the actual upgrade occurring, which will allow\nfor a completely automated upgrade.")]),e._v(" "),a("p",[a("strong",[e._v("IMPORTANT")]),e._v(" During the upgrade, "),a("code",[e._v("cosmovisor")]),e._v(" will automatically do a full backup of the "),a("code",[e._v(".und_mainchain/data")]),e._v("\ndirectory. Ensure your host has adequate disk space to accommodate the backup. This may add significant time\nto the upgrade process, and as such, the process may take up to 30 minutes before the node comes back online.")]),e._v(" "),a("h4",{attrs:{id:"_1-create-the-cosmovisor-upgrade-plan-directory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-create-the-cosmovisor-upgrade-plan-directory"}},[e._v("#")]),e._v(" 1. Create the Cosmovisor upgrade plan directory")]),e._v(" "),a("p",[e._v("This will be dependent on how you configured "),a("code",[e._v("cosmovisor")]),e._v(", and your actual "),a("code",[e._v(".und_mainchain")]),e._v(" path:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("$HOME")]),e._v("/.und_mainchain/cosmovisor/upgrades/4-percival/bin\n")])])]),a("h4",{attrs:{id:"_2-download-the-latest-und-v1-9-x-and-add-to-cosmovisor-s-upgrades-directory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-download-the-latest-und-v1-9-x-and-add-to-cosmovisor-s-upgrades-directory"}},[e._v("#")]),e._v(" 2. Download the latest "),a("code",[e._v("und")]),e._v(" v1.9.x and add to Cosmovisor's "),a("code",[e._v("upgrades")]),e._v(" directory")]),e._v(" "),a("InstallUnd",{attrs:{version:"1.9.0",plan:"4-percival"}}),e._v(" "),a("p",[e._v("Check the version output is "),a("code",[e._v("1.9.0")]),e._v("!")]),e._v(" "),a("p",[e._v("The directory structure for "),a("code",[e._v("$HOME/.und_mainchain/cosmovisor")]),e._v(" should now look as follows:")]),e._v(" "),a("tabs",{attrs:{options:{useUrlFragment:!1}}},[a("tab",{attrs:{name:"MainNet"}},[a("h4",{attrs:{id:"mainnet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mainnet"}},[e._v("#")]),e._v(" MainNet")]),e._v(" "),a("p",[a("strong",[e._v("Note:")]),e._v(" 1st upgrade path name is "),a("code",[e._v("1-init_ibc")]),e._v(" "),a("CosmovisorDirTree",{attrs:{network:"mainnet",plan:"4-percival",upgraded:"false"}})],1)]),e._v(" "),a("tab",{attrs:{name:"TestNet"}},[a("h4",{attrs:{id:"testnet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#testnet"}},[e._v("#")]),e._v(" TestNet")]),e._v(" "),a("p",[a("strong",[e._v("Note:")]),e._v(" 1st upgrade path name is "),a("code",[e._v("1-ibc")]),e._v(" "),a("CosmovisorDirTree",{attrs:{network:"testnet",plan:"4-percival",upgraded:"false"}})],1)])],1),e._v(" "),a("p",[e._v("That's it! When the upgrade height specified in the governance proposal is reached, Cosmovisor and the "),a("code",[e._v("upgrade")]),e._v("\nmodule will handle the rest automatically.")]),e._v(" "),a("h3",{attrs:{id:"cosmovisor-upgrade-process-overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cosmovisor-upgrade-process-overview"}},[e._v("#")]),e._v(" Cosmovisor Upgrade process overview")]),e._v(" "),a("p",[e._v("Briefly, at the upgrade height, Cosmovisor will automatically:")]),e._v(" "),a("ol",[a("li",[e._v("Stop the "),a("code",[e._v("und")]),e._v(" v1.8.x binary")]),e._v(" "),a("li",[e._v("Backup "),a("code",[e._v(".und_mainchain/data")]),e._v(" to "),a("code",[e._v(".und_mainchain/data-backup-YYYY-M-DD")]),a("strong",[e._v("*")])]),e._v(" "),a("li",[e._v("Reconfigure itself to use "),a("code",[e._v("und")]),e._v(" v1.9.x")]),e._v(" "),a("li",[e._v("Restart "),a("code",[e._v("und")]),e._v(" using the new version")])]),e._v(" "),a("p",[a("strong",[e._v("*Ensure the host has enough space to back up!")])]),e._v(" "),a("h2",{attrs:{id:"manual-upgrade-not-recommended"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#manual-upgrade-not-recommended"}},[e._v("#")]),e._v(" Manual upgrade (not recommended)")]),e._v(" "),a("p",[e._v("The alternative to implementing Cosmovisor is to manually upgrade the binary. Once the upgrade height specified in the\ngovernance proposal is reached, the "),a("code",[e._v("upgrade")]),e._v(" module will automatically halt the node via a "),a("code",[e._v("panic")]),e._v(". The node operator\nwill then need to:")]),e._v(" "),a("ol",[a("li",[e._v("Stop the "),a("code",[e._v("und")]),e._v(" v1.8.x binary, via "),a("code",[e._v("systemd")]),e._v(" or their chosen method")]),e._v(" "),a("li",[e._v("Backup the "),a("code",[e._v("und_mainchain/data")]),e._v(" directory")]),e._v(" "),a("li",[e._v("Download and install the latest "),a("code",[e._v("und")]),e._v(" v1.9.x, replacing the old v1.8.x binary (for example in "),a("code",[e._v("/usr/local/bin")]),e._v(")")]),e._v(" "),a("li",[e._v("Restart the "),a("code",[e._v("und")]),e._v(" binary, via "),a("code",[e._v("systemd")]),e._v(" or their chosen method.")])]),e._v(" "),a("p",[e._v("Since the process involves manual intervention, monitoring and execution, the process may take longer.")])],1)}),[],!1,null,null,null);a.default=s.exports}}]);