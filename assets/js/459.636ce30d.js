(window.webpackJsonp=window.webpackJsonp||[]).push([[459],{739:function(a,t,e){"use strict";e.r(t);var s=e(14),n=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"und-cli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#und-cli"}},[a._v("#")]),a._v(" und CLI")]),a._v(" "),t("p",[a._v("The und binary (>= v1.10.1) can also be used to create and manage Payment Streams, and a number of commands are\navailable to facilitate this.")]),a._v(" "),t("h2",{attrs:{id:"create-a-stream"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-a-stream"}},[a._v("#")]),a._v(" Create a Stream")]),a._v(" "),t("p",[a._v("In order to create a stream we need a few pieces of information - the receiver wallet, the flow rate, and the deposit.")]),a._v(" "),t("h3",{attrs:{id:"calculating-the-flow-rate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#calculating-the-flow-rate"}},[a._v("#")]),a._v(" Calculating the Flow Rate")]),a._v(" "),t("p",[a._v("The Flow rate can be calculated manually, or automatically using the und binary.")]),a._v(" "),t("h4",{attrs:{id:"manually"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#manually"}},[a._v("#")]),a._v(" Manually")]),a._v(" "),t("p",[a._v("First, we’ll need to convert the amount being sent in FUND to "),t("code",[a._v("nund")]),a._v(". This is simply "),t("code",[a._v("FUND * 10^9")]),a._v(", for example,\n100 FUND = 100,000,000,000 "),t("code",[a._v("nund")]),a._v(",")]),a._v(" "),t("p",[a._v("Next, we calculate the flow rate using the formula:")]),a._v(" "),t("p",[t("strong",[t("code",[a._v("Flow Rate = nund / total seconds")])])]),a._v(" "),t("p",[a._v("For example, if we’re sending 100 FUND/month, then the total seconds is "),t("strong",[a._v("(365/12) * 24 * 60 * 60")]),a._v(".")]),a._v(" "),t("p",[t("strong",[t("code",[a._v("Flow Rate = 100000000000 / ((365/12) * 24 * 60 * 60) = 38051")])])]),a._v(" "),t("p",[a._v("(rounded down from 38051.75)")]),a._v(" "),t("p",[a._v("Our flow rate is "),t("strong",[a._v("38051")]),a._v(".")]),a._v(" "),t("h4",{attrs:{id:"automatically"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#automatically"}},[a._v("#")]),a._v(" Automatically")]),a._v(" "),t("p",[a._v("Two commands can be used to help automatically calculate the flow rate:")]),a._v(" "),t("p",[t("strong",[a._v("Convert FUND to nund:")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und convert "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" fund nund\n")])])]),t("p",[t("strong",[a._v("Calculate the Flow rate:")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und query stream calculate_flow "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--coin")]),a._v(" 100000000000nund "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--period")]),a._v(" month "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--duration")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("This will return the flow rate of "),t("strong",[a._v("38051")]),a._v(".")]),a._v(" "),t("p",[a._v("Once we have this information, the stream can be created using the command:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und tx stream create "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("RECEIVER_ADDRESS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("DEPOSIT_AMOUNT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("FLOW_RATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("For example:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und tx stream create und123"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".abc 1000000000000nund "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("38051")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--node")]),a._v(" https://rpc.unification.io:443 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--chain-id FUND-MainNet-2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" auto "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--gas-adjustment "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.5")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--gas-prices "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v(".0nund "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" SENDER_WALLET\n")])])]),t("h2",{attrs:{id:"modify-a-stream"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modify-a-stream"}},[a._v("#")]),a._v(" Modify a Stream")]),a._v(" "),t("h3",{attrs:{id:"top-up-deposit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#top-up-deposit"}},[a._v("#")]),a._v(" Top Up Deposit")]),a._v(" "),t("p",[a._v("Topping up a deposit is simple, and requires the sender wallet to execute the following command:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und tx stream topup "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("RECEIVER_ADDRESS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("DEPOSIT_AMOUNT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("For example:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und tx stream topup und123"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".abc 1000000000000nund "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--node")]),a._v(" https://rpc.unification.io:443 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--chain-id FUND-MAinNet-2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" auto "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--gas-adjustment "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.5")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--gas-prices "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v(".0nund "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" SENDER_WALLET\n")])])]),t("h3",{attrs:{id:"update-flow-rate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#update-flow-rate"}},[a._v("#")]),a._v(" Update Flow Rate")]),a._v(" "),t("p",[a._v("The flow rate can be updated at any time during an active stream. The sender may modify the flow rate if, for example,\nthey wish to move on to a higher (or lower) subscription tier on the service they are paying for.")]),a._v(" "),t("p",[a._v("Two important things happen when a flow rate is updated:")]),a._v(" "),t("ol",[t("li",[a._v("Any unclaimed payments are calculated at the current flow rate and sent to the receiver wallet (with validator\nfees also calculated and sent if applicable)")]),a._v(" "),t("li",[a._v("The deposit zero time is recalculated based on the new flow rate.")])]),a._v(" "),t("p",[a._v("The following command can be executed to update a flow rate:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und tx stream update-flow "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("RECEIVER_ADDRESS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("NEW_FLOW_RATE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("For example, the Sender wants to move onto a higher subscription tier, which costs 150 FUND/month. The new flow\nrate is therefore 57077 nund/sec:")]),a._v(" "),t("p",[t("code",[a._v("150000000000 / ((365/12) * 24 * 60 * 60) = 57077")])]),a._v(" "),t("p",[a._v("(rounded down from 57077.62)")]),a._v(" "),t("p",[a._v("The command to run is:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und tx stream update-flow und123"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".abc "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("57077")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--node")]),a._v(" https://rpc.unification.io:443 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--chain-id FUND-MainNet-2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" auto "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--gas-adjustment "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.5")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--gas-prices "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v(".0nund "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" SENDER_WALLET\n")])])]),t("h2",{attrs:{id:"cancel-a-stream"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cancel-a-stream"}},[a._v("#")]),a._v(" Cancel a Stream")]),a._v(" "),t("p",[a._v("A sender can cancel a stream at any time. When a stream is cancelled, any unclaimed payment up to the time of the\ncancellation is calculated and sent to the receiver. Any remaining deposit, if any, is returned to the sender's wallet.")]),a._v(" "),t("p",[a._v("The following command can be executed to cancel a stream:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und tx stream cancel "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("RECEIVER_ADDRESS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("For example:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und tx stream cancel und123"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".abc "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--node")]),a._v(" https://rpc.unification.io:443 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--chain-id FUND-MainNet-2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" auto "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--gas-adjustment "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.5")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--gas-prices "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v(".0nund "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" SENDER_WALLET\n")])])]),t("h2",{attrs:{id:"claim-from-a-stream"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#claim-from-a-stream"}},[a._v("#")]),a._v(" Claim from a Stream")]),a._v(" "),t("p",[a._v("A receiver can run the claim command at any time:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und tx stream claim "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("SENDER_ADDRESS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("For example:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und tx stream claim und456"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".def "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--node")]),a._v(" https://rpc.unification.io:443 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--chain-id FUND-MainNet-2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--gas")]),a._v(" auto "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--gas-adjustment "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.5")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--gas-prices "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v(".0nund "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--from")]),a._v(" RECEIVER_WALLET\n")])])]),t("h2",{attrs:{id:"query-a-stream"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#query-a-stream"}},[a._v("#")]),a._v(" Query a Stream")]),a._v(" "),t("p",[a._v("A stream can be queried with the following command:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und query stream stream "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("RECEIVER_ADDRESS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("SENDER_ADDRESS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("For example:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("und query stream stream und123"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".abc und456"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".def "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--node")]),a._v(" https://rpc.unification.io:443 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--chain-id FUND-MainNet-2\n")])])]),t("p",[a._v("The data returned will be similar to that displayed in the UI, but without the real-time claimable amount.")])])}),[],!1,null,null,null);t.default=n.exports}}]);